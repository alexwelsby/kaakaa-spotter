import{j as e,L as j,r as n,B as k,R as N,a as b,c as P}from"./vendor-ElVX2CyF.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function d(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=d(t);fetch(t.href,s)}})();const C="/static/react/react-CHdo91hT.svg",I="_navBar_nm2ek_1",L="_logoHeader_nm2ek_15",O="_pageOptions_nm2ek_41",_={navBar:I,logoHeader:L,pageOptions:O};function F(){return e.jsxs("header",{className:_.logoHeader,children:[e.jsx("img",{src:C}),e.jsxs("h2",{children:["DSA ",e.jsx("br",{}),"Membership",e.jsx("br",{}),"Visualizer"]})]})}function H(){return e.jsxs("nav",{className:_.navBar,children:[e.jsx(F,{}),e.jsxs("div",{className:_.pageOptions,children:[e.jsx(j,{to:"/app",children:"Dashboard"}),e.jsx(j,{to:"/app/stats",children:"Statistics"}),e.jsx(j,{to:"/app/upload",children:"Upload images"})]})]})}const D="_half_1mhmr_1",M="_previewImg_1mhmr_29",U="_whole_1mhmr_37",f={half:D,previewImg:M,whole:U};function B(){const[r,o]=n.useState(null),[d,l]=n.useState([]),[t,s]=n.useState(!0),[a,g]=n.useState(!1),[x,p]=n.useState(""),m=i=>{setMessage(i.target.value)},h=i=>{g(!a),a||p("")},w=i=>{const c=Array.from(i.target.files);console.log(c),o(c[0]),console.log(r)},S=async i=>{i.preventDefault();const c=new FormData;c.append("image",r),c.append("label",x);try{const y=await(await fetch("http://127.0.0.1:8000/api/upload/",{method:"POST",body:c})).json();console.log(y),l(y.mask_urls),s(!1)}catch(v){console.error("Failed to send/fetch to upload api ",v)}};return e.jsxs("form",{onSubmit:S,children:[e.jsx("input",{type:"file",accept:"image/*",id:"file-input",name:"filename",onChange:w}),e.jsx("input",{type:"submit"}),e.jsx("label",{for:"toggle_label",children:"Do you know the bands for this bird?:"}),e.jsx("input",{type:"checkbox",name:"toggle_label",onChange:h}),a?e.jsxs(e.Fragment,{children:[e.jsx("label",{for:"b_label",children:"Band code:"}),e.jsx("input",{type:"text",id:"b_label",name:"b_label",onChange:m})]}):e.jsx(e.Fragment,{})," ",t?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:d.map((i,c)=>e.jsx("img",{src:i,alt:`mask-${c}`},c))}),e.jsx("img",{className:f.previewImg})]})}const q="_indivPost_wqkgm_1",$="_dashboard_wqkgm_19",A="_postContent_wqkgm_31",E="_postImg_wqkgm_41",R="_postHeader_wqkgm_51",u={indivPost:q,dashboard:$,postContent:A,postImg:E,postHeader:R};function T(){return e.jsxs("div",{className:f.half,children:[e.jsx("div",{className:u.postHeader,children:"Upload section"}),e.jsx(B,{})]})}function V(){return e.jsx("div",{className:f.half,children:e.jsx("div",{className:u.postHeader,children:"View section"})})}function z(){return e.jsxs("div",{className:f.whole,children:[e.jsx(T,{}),e.jsx(V,{})]})}function K({key:r,post:o}){Math.floor((Date.now()-o.date)/1e3);const[d,l]=n.useState(o.original);function t(s){const a=s-Date.now(),g=Math.floor(Math.abs(a)/1e3),x=[{label:"year",seconds:31536e3},{label:"month",seconds:2592e3},{label:"day",seconds:86400},{label:"hour",seconds:3600},{label:"minute",seconds:60},{label:"second",seconds:1}];for(const p of x){const m=Math.floor(g/p.seconds);if(m>=1){const h=p.label+(m>1?"s":"");return a<0?`${m} ${h} ago`:`in ${m} ${h}`}}return"just now"}return e.jsxs("div",{className:u.indivPost,children:[e.jsxs("div",{className:u.postHeader,children:["Uploaded ",t(o.date)]}),e.jsxs("div",{className:u.postContent,children:[e.jsx("button",{onClick:()=>l(o.original),children:"Original"}),o.masks.map((s,a)=>e.jsxs("button",{onClick:()=>l(s),children:["Mask ",a]})),e.jsx("img",{className:u.postImg,src:d})]})]})}function G(){const[r,o]=n.useState([]),[d,l]=n.useState(!0);return n.useEffect(()=>{async function t(){try{const s=await fetch("http://127.0.0.1:8000/api/images-library");if(!s.ok)throw new Error("Failed to fetch posts");const a=await s.json();o(a)}catch(s){console.error(s)}finally{l(!1)}}t()},[]),d?e.jsx(e.Fragment,{}):e.jsx("div",{className:u.dashboard,children:r.map((t,s)=>e.jsx(K,{post:t},s))})}const J="_defaultPage_qrynq_1",Q={defaultPage:J};function W({children:r}){return e.jsx("div",{className:Q.defaultPage,children:r})}function X(){return e.jsx(W,{children:"SSTATS lol. lmao even"})}function Y(){const[r,o]=n.useState(0);return e.jsxs(k,{children:[e.jsx(H,{}),e.jsxs(N,{children:[e.jsx(b,{path:"app/",element:e.jsx(G,{})}),e.jsx(b,{path:"app/upload",element:e.jsx(z,{})}),e.jsx(b,{path:"app/stats",element:e.jsx(X,{})})]})]})}P.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(Y,{})}));
