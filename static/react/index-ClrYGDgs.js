import{j as e,L as _,r as n,B as P,R as U,a as b,c as L}from"./vendor-ElVX2CyF.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function u(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(t){if(t.ep)return;t.ep=!0;const s=u(t);fetch(t.href,s)}})();const C="/static/react/react-CHdo91hT.svg",O="_navBar_nm2ek_1",F="_logoHeader_nm2ek_15",I="_pageOptions_nm2ek_41",v={navBar:O,logoHeader:F,pageOptions:I};function D(){return e.jsxs("header",{className:v.logoHeader,children:[e.jsx("img",{src:C}),e.jsxs("h2",{children:["DSA ",e.jsx("br",{}),"Membership",e.jsx("br",{}),"Visualizer"]})]})}function H(){return e.jsxs("nav",{className:v.navBar,children:[e.jsx(D,{}),e.jsxs("div",{className:v.pageOptions,children:[e.jsx(_,{to:"/app",children:"Dashboard"}),e.jsx(_,{to:"/app/stats",children:"Statistics"}),e.jsx(_,{to:"/app/upload",children:"Upload images"})]})]})}const B="_half_1m39z_1",M="_previewImg_1m39z_29",q="_container_1m39z_37",R="_customUpload_1m39z_57",$="_whole_1m39z_85",d={half:B,previewImg:M,container:q,customUpload:R,whole:$};function A(){const[l,a]=n.useState(null),[u,c]=n.useState(null),[t,s]=n.useState([]),[o,j]=n.useState(!0),[h,f]=n.useState(!1),[m,g]=n.useState(""),y=i=>{setMessage(i.target.value)},w=i=>{f(!h),h||g("")},S=i=>{const r=Array.from(i.target.files),x=URL.createObjectURL(r[0]);a(x),c(r[0])},k=async i=>{i.preventDefault();const r=new FormData;r.append("image",u),r.append("label",m),console.log(r);try{const N=await(await fetch("http://127.0.0.1:8000/api/upload/",{method:"POST",body:r})).json();s(N.mask_urls),j(!1)}catch(x){console.error("Failed to send/fetch to upload api ",x)}};return e.jsx("form",{onSubmit:k,children:e.jsxs("div",{className:d.container,children:[e.jsxs("label",{className:d.customUpload,children:[l?e.jsx("img",{src:l,alt:"Preview"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:d.icon,children:"☁️"}),e.jsx("div",{style:d.labelText,children:"Upload an image"})]}),e.jsx("input",{type:"file",accept:"image/*",id:"file-input",name:"filename",onChange:S})]}),e.jsxs("div",{className:d.BandCheck,children:[e.jsx("label",{for:"toggle_label",children:"Do you know the bands for this bird?"}),e.jsx("input",{type:"checkbox",name:"toggle_label",onChange:w}),h?e.jsxs(e.Fragment,{children:[e.jsx("label",{for:"b_label",children:"Band code:"}),e.jsx("input",{type:"text",id:"b_label",name:"b_label",onChange:y})]}):e.jsx(e.Fragment,{})," "]}),o?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:t.map((i,r)=>e.jsx("img",{src:i,alt:`mask-${r}`},r))}),e.jsx("img",{className:d.previewImg}),e.jsx("input",{type:"submit"})]})})}const E="_indivPost_wqkgm_1",z="_dashboard_wqkgm_19",T="_postContent_wqkgm_31",K="_postImg_wqkgm_41",V="_postHeader_wqkgm_51",p={indivPost:E,dashboard:z,postContent:T,postImg:K,postHeader:V};function G(){return e.jsxs("div",{className:d.half,children:[e.jsx("div",{className:p.postHeader,children:"Upload section"}),e.jsx(A,{})]})}function J(){return e.jsx("div",{className:d.whole,children:e.jsx(G,{})})}function Q({key:l,post:a}){Math.floor((Date.now()-a.date)/1e3);const[u,c]=n.useState(a.original);function t(s){const o=s-Date.now(),j=Math.floor(Math.abs(o)/1e3),h=[{label:"year",seconds:31536e3},{label:"month",seconds:2592e3},{label:"day",seconds:86400},{label:"hour",seconds:3600},{label:"minute",seconds:60},{label:"second",seconds:1}];for(const f of h){const m=Math.floor(j/f.seconds);if(m>=1){const g=f.label+(m>1?"s":"");return o<0?`${m} ${g} ago`:`in ${m} ${g}`}}return"just now"}return e.jsxs("div",{className:p.indivPost,children:[e.jsxs("div",{className:p.postHeader,children:["Uploaded ",t(a.date)]}),e.jsxs("div",{className:p.postContent,children:[e.jsx("button",{onClick:()=>c(a.original),children:"Original"}),a.masks.map((s,o)=>e.jsxs("button",{onClick:()=>c(s),children:["Mask ",o]})),e.jsx("img",{className:p.postImg,src:u})]})]})}function W(){const[l,a]=n.useState([]),[u,c]=n.useState(!0);return n.useEffect(()=>{async function t(){try{const s=await fetch("http://127.0.0.1:8000/api/images-library");if(!s.ok)throw new Error("Failed to fetch posts");const o=await s.json();a(o)}catch(s){console.error(s)}finally{c(!1)}}t()},[]),u?e.jsx(e.Fragment,{}):e.jsx("div",{className:p.dashboard,children:l.map((t,s)=>e.jsx(Q,{post:t},s))})}const X="_defaultPage_qrynq_1",Y={defaultPage:X};function Z({children:l}){return e.jsx("div",{className:Y.defaultPage,children:l})}function ee(){return e.jsx(Z,{children:"SSTATS lol. lmao even"})}function se(){const[l,a]=n.useState(0);return e.jsxs(P,{children:[e.jsx(H,{}),e.jsxs(U,{children:[e.jsx(b,{path:"app/",element:e.jsx(W,{})}),e.jsx(b,{path:"app/upload",element:e.jsx(J,{})}),e.jsx(b,{path:"app/stats",element:e.jsx(ee,{})})]})]})}L.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(se,{})}));
