import{j as e,L as j,r as n,B as C,R as O,a as _,c as F}from"./vendor-ElVX2CyF.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function p(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(s){if(s.ep)return;s.ep=!0;const t=p(s);fetch(s.href,t)}})();const I="/static/react/react-CHdo91hT.svg",D="_navBar_nm2ek_1",H="_logoHeader_nm2ek_15",B="_pageOptions_nm2ek_41",v={navBar:D,logoHeader:H,pageOptions:B};function M(){return e.jsxs("header",{className:v.logoHeader,children:[e.jsx("img",{src:I}),e.jsxs("h2",{children:["DSA ",e.jsx("br",{}),"Membership",e.jsx("br",{}),"Visualizer"]})]})}function q(){return e.jsxs("nav",{className:v.navBar,children:[e.jsx(M,{}),e.jsxs("div",{className:v.pageOptions,children:[e.jsx(j,{to:"/app",children:"Dashboard"}),e.jsx(j,{to:"/app/stats",children:"Statistics"}),e.jsx(j,{to:"/app/upload",children:"Upload images"}),e.jsx(j,{to:"/app/search",children:"Search via image"})]})]})}const R="_half_1m39z_1",$="_previewImg_1m39z_29",A="_container_1m39z_37",E="_customUpload_1m39z_57",z="_whole_1m39z_85",d={half:R,previewImg:$,container:A,customUpload:E,whole:z};function T(){const[l,a]=n.useState(null),[p,c]=n.useState(null),[s,t]=n.useState([]),[o,b]=n.useState(!0),[f,g]=n.useState(!1),[u,x]=n.useState(""),k=i=>{setMessage(i.target.value)},N=i=>{g(!f),f||x("")},P=i=>{const r=Array.from(i.target.files),h=URL.createObjectURL(r[0]);a(h),c(r[0])},U=async i=>{i.preventDefault();const r=new FormData;r.append("image",p),r.append("label",u);const h=window.location.pathname,L=h.endsWith("/search")?"http://127.0.0.1:8000/api/search/":h.endsWith("/upload")?"http://127.0.0.1:8000/api/upload/":"";console.log(h),console.log(r);try{const w=await(await fetch(L,{method:"POST",body:r})).json();console.log(w),h.endsWith("/upload")&&t(w.mask_urls),b(!1)}catch(y){console.error("Failed to send/fetch to upload api ",y)}};return e.jsx("form",{onSubmit:U,children:e.jsxs("div",{className:d.container,children:[e.jsxs("label",{className:d.customUpload,children:[l?e.jsx("img",{src:l,alt:"Preview"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:d.icon,children:"☁️"}),e.jsx("div",{style:d.labelText,children:"Upload an image"})]}),e.jsx("input",{type:"file",accept:"image/*",id:"file-input",name:"filename",onChange:P})]}),e.jsxs("div",{className:d.BandCheck,children:[e.jsx("label",{for:"toggle_label",children:"Do you know the bands for this bird?"}),e.jsx("input",{type:"checkbox",name:"toggle_label",onChange:N}),f?e.jsxs(e.Fragment,{children:[e.jsx("label",{for:"b_label",children:"Band code:"}),e.jsx("input",{type:"text",id:"b_label",name:"b_label",onChange:k})]}):e.jsx(e.Fragment,{})," "]}),o||s===void 0?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:s.map((i,r)=>e.jsx("img",{src:i,alt:`mask-${r}`},r))}),e.jsx("img",{className:d.previewImg}),e.jsx("input",{type:"submit"})]})})}const W="_indivPost_wqkgm_1",K="_dashboard_wqkgm_19",V="_postContent_wqkgm_31",G="_postImg_wqkgm_41",J="_postHeader_wqkgm_51",m={indivPost:W,dashboard:K,postContent:V,postImg:G,postHeader:J};function Q(){return e.jsxs("div",{className:d.half,children:[e.jsx("div",{className:m.postHeader,children:"Upload section"}),e.jsx(T,{})]})}function S(){return e.jsx("div",{className:d.whole,children:e.jsx(Q,{})})}function X({key:l,post:a}){Math.floor((Date.now()-a.date)/1e3);const[p,c]=n.useState(a.original);function s(t){const o=t-Date.now(),b=Math.floor(Math.abs(o)/1e3),f=[{label:"year",seconds:31536e3},{label:"month",seconds:2592e3},{label:"day",seconds:86400},{label:"hour",seconds:3600},{label:"minute",seconds:60},{label:"second",seconds:1}];for(const g of f){const u=Math.floor(b/g.seconds);if(u>=1){const x=g.label+(u>1?"s":"");return o<0?`${u} ${x} ago`:`in ${u} ${x}`}}return"just now"}return e.jsxs("div",{className:m.indivPost,children:[e.jsxs("div",{className:m.postHeader,children:["Uploaded ",s(a.date)]}),e.jsxs("div",{className:m.postContent,children:[e.jsx("button",{onClick:()=>c(a.original),children:"Original"}),a.masks.map((t,o)=>e.jsxs("button",{onClick:()=>c(t),children:["Mask ",o]})),e.jsx("img",{className:m.postImg,src:p})]})]})}function Y(){const[l,a]=n.useState([]),[p,c]=n.useState(!0);return n.useEffect(()=>{async function s(){try{const t=await fetch("http://127.0.0.1:8000/api/images-library");if(!t.ok)throw new Error("Failed to fetch posts");const o=await t.json();a(o)}catch(t){console.error(t)}finally{c(!1)}}s()},[]),p?e.jsx(e.Fragment,{}):e.jsx("div",{className:m.dashboard,children:l.map((s,t)=>e.jsx(X,{post:s},t))})}const Z="_defaultPage_qrynq_1",ee={defaultPage:Z};function se({children:l}){return e.jsx("div",{className:ee.defaultPage,children:l})}function te(){return e.jsx(se,{children:"SSTATS lol. lmao even"})}function ae(){const[l,a]=n.useState(0);return e.jsxs(C,{children:[e.jsx(q,{}),e.jsxs(O,{children:[e.jsx(_,{path:"app/",element:e.jsx(Y,{})}),e.jsx(_,{path:"app/upload",element:e.jsx(S,{})}),e.jsx(_,{path:"app/search",element:e.jsx(S,{})}),e.jsx(_,{path:"app/stats",element:e.jsx(te,{})})]})]})}F.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(ae,{})}));
